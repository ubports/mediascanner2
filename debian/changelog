mediascanner2 (0.105+15.04.20141030.1-0ubuntu1) vivid; urgency=low

  [ James Henstridge ]
  * When a new directory is added and a new inotify watch is set up,
    call fileAdded() on any regular files already in the directory so
    they are not missed. (LP: #1379817)

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Thu, 30 Oct 2014 11:23:12 +0000

mediascanner2 (0.105+14.10.20141001-0ubuntu1) utopic; urgency=low

  [ James Henstridge ]
  * Use udisksd to track mounts and unmounts of removable media. (LP:
    #1358750)

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Wed, 01 Oct 2014 06:59:45 +0000

mediascanner2 (0.105+14.10.20140925.1-0ubuntu1) utopic; urgency=low

  [ Jussi Pakkanen ]
  * Print banner when starting the daemon so upstart logs are easier to
    parse.
  * Use fallback data for crasher files so they at least show up in
    scope queries.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Thu, 25 Sep 2014 11:58:02 +0000

mediascanner2 (0.105+14.10.20140909-0ubuntu1) utopic; urgency=low

  [ Jussi Pakkanen ]
  * Print a log message when skipping a broken file.

  [ Jamie Strandboge ]
  * debian/usr.bin.mediascanner-service-2.0: add video abstraction.
    silence access to /run/udev/data/** like we do elsewhere. allow read
    on /dev/video*. allow read on /sys/devices/**/video4linux/**/uevent
    .

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Tue, 09 Sep 2014 08:41:03 +0000

mediascanner2 (0.105+14.10.20140903-0ubuntu1) utopic; urgency=medium

  [ James Henstridge ]
  * Record whether files contain embedded artwork in the media index.
  * Use this info to generate art URIs that either use embedded artwork,
    or the network based albumart provider.
  * Expose embedded album art for Album objects too. Bump soname to
    account for Album class changing size.

  [ Ubuntu daily release ]
  * debian/libmediascanner-2.0-3.symbols: auto-update to released
    version
  * New rebuild forced

  [ Jussi Pakkanen ]
  * Fix usage of blocking cache.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Wed, 03 Sep 2014 11:46:24 +0000

mediascanner2 (0.104+14.10.20140825-0ubuntu1) utopic; urgency=medium

  [ James Henstridge ]
  * Add support for custom sort orders in query(), queryAlbums() and
    queryArtists() methods.  This breaks the ABI, so bump soname.
  * Update AppArmor policy to allow read access to
    /sys/devices/**/video4linux/video** (LP: #1353139)

  [ Ubuntu daily release ]
  * debian/libmediascanner-2.0-2.symbols: auto-update to released
    version

  [ Jussi Pakkanen ]
  * Fix inotify usage.
  * Store information on files that break GStreamer and skip them when
    encountered.
  * Don't call closedir with a null argument.
  * Add database integrity constraints.

  [ Jamie Strandboge ]
  * allow read access to /etc/udev/udev.conf for gstreamer (LP:
    #1356883) (LP: #1356883)

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Mon, 25 Aug 2014 12:52:17 +0000

mediascanner2 (0.103+14.10.20140819-0ubuntu1) utopic; urgency=low

  [ Jussi Pakkanen ]
  * Apparmor fix from jdstrand. (LP: #1357348)

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Tue, 19 Aug 2014 12:52:52 +0000

mediascanner2 (0.103+14.10.20140815.1-0ubuntu1) utopic; urgency=medium

  [ Dimitri John Ledkov ]
  * Add missing dependencies to libmediascanner-2.0-dev package. (LP: 
    #1351358)

  [ James Henstridge ]
  * Automatically update models when the daemon sends the 
    InvalidateResults D-Bus signal. Add a status property to models to 
    let loading progress be tracked. Rename rowCount property to count, 
    keeping the old name around for compatibility. (LP: #1347444)

  [ Jussi Pakkanen ]
  * Minor fixes for libc++.
  * Handle the case when /media/username does not exist when 
    Mediascanner first starts up. (LP: #1354543)

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 15 Aug 2014 11:18:39 +0000

mediascanner2 (0.102+14.10.20140805-0ubuntu1) utopic; urgency=low

  [ James Henstridge ]
  * Fix off by one error when appending new rows to QML models. (LP:
    #1350529)

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Tue, 05 Aug 2014 11:44:48 +0000

mediascanner2 (0.102+14.10.20140730.1-0ubuntu1) utopic; urgency=medium

  [ Jussi Pakkanen ]
  * Added an autopkgtest.
  * Fixes for various issues found by flint++.
  * Install Filter.hh.
  * Archive items on unmount.

  [ James Henstridge ]
  * Stream data to the QML models in chunks through a background
    thread using QtConcurrent.
    The limit option on the various models has been removed, since we
    the individual queries are smaller.
  * Add MediaStore::queryArtists() method, needed for the new scope
    design.

  [ Ubuntu daily release ]
  * debian/libmediascanner-2.0-1.symbols: auto-update to released
    version

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Wed, 30 Jul 2014 10:49:39 +0000

mediascanner2 (0.101+14.10.20140724.1-0ubuntu1) utopic; urgency=medium

  [ Alfonso Sanchez-Beato (email Canonical) ]
  * Adjust apparmor configuration for MTK device 

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Thu, 24 Jul 2014 11:15:33 +0000

mediascanner2 (0.101+14.10.20140721-0ubuntu1) utopic; urgency=low

  [ Jussi Pakkanen ]
  * Specify GCC 4.9 explicitly to prevent ABI breakage.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Mon, 21 Jul 2014 14:16:51 +0000

mediascanner2 (0.101+14.10.20140715-0ubuntu1) utopic; urgency=low

  * New rebuild forced

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Tue, 15 Jul 2014 14:03:12 +0000

mediascanner2 (0.101+14.10.20140702-0ubuntu1) utopic; urgency=low

  [ James Henstridge ]
  * Update the FTS tokenizer to work with SQLite 3.8.5, and reenable the
    MediaStoreTest.query_short test. Bump libsqlite3-dev build
    dependency to 3.8.5 too.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Wed, 02 Jul 2014 08:07:49 +0000

mediascanner2 (0.101+14.10.20140627-0ubuntu3) utopic; urgency=medium

  * apparmor: add missing proc file used by the mediatek soc

 -- Ricardo Salveti de Araujo <ricardo.salveti@canonical.com>  Tue, 01 Jul 2014 11:29:31 +0800

mediascanner2 (0.101+14.10.20140627-0ubuntu2) utopic; urgency=medium

  * debian/usr.bin.mediascanner-service-2.0: couple more minor updates for
    (mostly) noisy denials
    - use consoles abstraction instead of just the pts interface since we need
      /dev/tty when crashing
    - finetune orcexec rules by allowing 'm' in /tmp but explicitly deny the
      others
    - allow non-owner read of @{PROC}/cmdline
    - use attach_disconnected for /dev/socket/property_service

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 27 Jun 2014 14:59:34 -0500

mediascanner2 (0.101+14.10.20140627-0ubuntu1) utopic; urgency=medium

  [ Jussi Pakkanen ]
  * Disable short query test to work around a behavioral change in
    SQLite.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 27 Jun 2014 17:30:35 +0000

mediascanner2 (0.101+14.10.20140625-0ubuntu2) utopic; urgency=medium

  * debian/usr.bin.mediascanner-service-2.0: updates for libhybris based on
    work by Ricardo Salveti. (LP: #1334940)

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 27 Jun 2014 08:00:22 -0500

mediascanner2 (0.101+14.10.20140625-0ubuntu1) utopic; urgency=low

  [ Ubuntu daily release ]
  * debian/*symbols: auto-update new symbols to released version

  [ James Henstridge ]
  * Enable the QML plugin to pick between two MediaStore backends: the
    direct disk backend and the D-Bus interface. The choice is made via
    the MEDIASCANNER_USE_DBUS environment variable, and defaults to
    direct access.

  [ Jamie Strandboge ]
  * * add AppArmor profile (LP: #1319065) - add
    debian/usr.bin.mediascanner-service-2.0 - debian/control: Build-
    Depends on dh-apparmor - debian/rules: update override_dh_installdeb
    to use dh_apparmor - debian/mediascanner2.0.dirs: add etc/apparmor.d
    - debian/mediascanner2.0.install: install profile in to place (LP:
    #1319065)

  [ CI bot ]
  * * add AppArmor profile (LP: #1319065) - add
    debian/usr.bin.mediascanner-service-2.0 - debian/control: Build-
    Depends on dh-apparmor - debian/rules: update override_dh_installdeb
    to use dh_apparmor - debian/mediascanner2.0.dirs: add etc/apparmor.d
    - debian/mediascanner2.0.install: install profile in to place (LP:
    #1319065)

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Wed, 25 Jun 2014 16:28:53 +0000

mediascanner2 (0.101+14.10.20140613-0ubuntu1) utopic; urgency=low

  [ Ubuntu daily release ]
  * debian/*symbols: auto-update new symbols to released version

  [ James Henstridge ]
  * Increase the timeout on D-Bus method calls. (LP: #1326753)
  * Catch exceptions in the QML plugin, and print a warning instead. QML
    applications terminate when C++ exceptions bubble up, which can not
    be recovered from. (LP: #1326753)
  * Add support for scanning photos using libexif. Adds libexif-dev as
    new build dependency. (LP: #1256334)

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 13 Jun 2014 06:22:32 +0000

mediascanner2 (0.101+14.10.20140530-0ubuntu1) utopic; urgency=low

  [ James Henstridge ]
  * Get rid of the direct constructor for MediaFile, forcing creation to 
    go through MediaFileBuilder (which won't break when we add more 
    metadata fields).
    Also move MediaFile fields to a private struct to avoid breaking ABI 
    in future when adding new metadata fields.
  * Add a D-Bus service exposing the MediaStore, and move the QML binding 
    over to using it.
  * Limit access to the MediaScanner D-Bus interface from confined
    processes.
    The trust-store API does not exist yet, so it just hard codes support 
    for the "com.ubuntu.music" application.
  * Introduce a mediascanner::Filter type to hold search parameters for
    the various MediaStore::list*() methods, and expand them to handle
    genres. The new API also distinguishes between an unset filter and
    a filter set to "". Make similar changes to the QML API, and add
    notify signals to the rowCount properties.
    (LP: #1319168, LP: #1319174).

  [ Jussi Pakkanen ]
  * Add support for .nomedia files to prevent chosen subtrees from being 
    scanned. (LP: #1294303).
  * Fix a few warnings emitted by clang.
  * Guard against empty MediaFileBuilders.
  * Fix CMake Project name.
  * Prune those files that have a scan block file on their path when 
    restoring.


 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 30 May 2014 07:29:07 +0000

mediascanner2 (0.100+14.10.20140508-0ubuntu1) utopic; urgency=low

  [ James Henstridge ]
  * Add genre and discNumber metadata fields to the media index, and
    expose it in the QML binding. Add rowCount property and get(row,
    role) method to each of the model classes in the QML binding. (LP:
    #1246172)

  [ Jussi Pakkanen ]
  * Don't scan optical discs.
  * Use generator for file traversal instead of a vector.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Thu, 08 May 2014 10:18:14 +0000

mediascanner2 (0.100+14.04.20140403-0ubuntu1) trusty; urgency=low

  [ James Henstridge ]
  * Remove the Unity scope found in src/utils: it looks like it has
    suffered from bit rot and has never been used (we have unity-scope-
    mediascanner instead). This also removes an unnecessary dependency
    on the old libunity.
  * Before using GStreamer to extract metadata from a file, print a log
    message. This is intended to help track problems with metadata
    extraction.

  [ Jussi Pakkanen ]
  * Avoid assert crash by not trying to unregister subvolumes that were
    skipped due to looking like root subdirs. (LP: #1294193)
  * The output value of stat is undefined when the stat call fails. So
    don't use it.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Thu, 03 Apr 2014 10:00:38 +0000

mediascanner2 (0.100+14.04.20140324-0ubuntu1) trusty; urgency=low

  [ James Henstridge ]
  * Expose an "art" role/property on album and song models, returning a
    URI that can be used with a QML Image component. The actual image
    provider comes from ubuntu-ui-toolkit.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Mon, 24 Mar 2014 18:34:58 +0000

mediascanner2 (0.100+14.04.20140314-0ubuntu1) trusty; urgency=low

  [ Jussi Pakkanen ]
  * Keep going if inotify watch creation fails.
  * Skip subdirectories that look like root directories.
  * Delay signal handling initialisation.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 14 Mar 2014 15:17:16 +0000

mediascanner2 (0.100+14.04.20140310-0ubuntu1) trusty; urgency=low

  * New rebuild forced

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Mon, 10 Mar 2014 08:20:17 +0000

mediascanner2 (0.100+14.04.20140307.1-0ubuntu1) trusty; urgency=low

  [ James Henstridge ]
  * First stages of a QML plugin for the Media Scanner. At present it 
    only exposes the query() and lookup() interfaces.
  * Relax the rules for tokenising the input when it ends with a short 
    token followed '*' wildcard. This allows us to produce results for 
    short strings when doing incremental searches.
  * Convert the scanner daemon over to using the glib main loop rather 
    than a hand rolled one, and limit invalidation signals to be sent at 
    most once a second.

  [ Jussi Pakkanen ]
  * Add sqlite error string to exception.
  * Shutdown cleanly on signals.
  * Made SQLite db safe to access from multiple threads.

  [ Michal Hruby ]
  * Fix incorrect depends

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 07 Mar 2014 17:40:21 +0000

mediascanner2 (0.99+14.04.20140220-0ubuntu1) trusty; urgency=low

  [ James Henstridge ]
  * Add a limit argument to MediaStore::queryAlbums(), and ensure that
    it returns some results when given an empty query string.

  [ Jussi Pakkanen ]
  * Added const qualifiers to methods and made album immutable just like
    mediafile.
  * Use lstat to avoid loops.
  * Fix path where media cache is stored.
  * Nil merge to get on the release train.
  * Send invalidation signal once the db is fully populated.

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Thu, 20 Feb 2014 10:03:04 +0000

mediascanner2 (0.99+14.04.20140205-0ubuntu1) trusty; urgency=low

  [ James Henstridge ]
  * Add a limit argument to MediaStore::query(), and ensure that it
    produces some results in response to an empty query.

  [ Jussi Pakkanen ]
  * Simple class for sending result set invalidation messages.
  * Add a mediascanner namespace.
  * Simpler header reorg.

  [ CI bot ]
  * Null merge to get changes through CITrain

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Wed, 05 Feb 2014 18:08:14 +0000

mediascanner2 (0.99+14.04.20140117-0ubuntu1) trusty; urgency=low

  [ James Henstridge ]
  * Fix a few issues that prevent the scanner daemon from running when
    stdin is redirected to /dev/null.
  * Fix the licensing on the public library so that it is correctly
    labelled as LGPL, like the old mediascanner code base.

  [ Ubuntu daily release ]
  * Automatic snapshot from revision 197

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 17 Jan 2014 07:50:53 +0000

mediascanner2 (0.99+14.04.20140110-0ubuntu1) trusty; urgency=low

  [ Jussi Pakkanen ]
  * Hot new stuff

  [ ≈Åukasz 'sil2100' Zemczak ]
  * Automatic snapshot from revision 191 (bootstrap)
  * We no longer ship any LGPL sources. Also, fix packaging naming in
    some places - along with Vcs-*

  [ Ubuntu daily release ]
  * Automatic snapshot from revision 194

 -- Ubuntu daily release <ps-jenkins@lists.canonical.com>  Fri, 10 Jan 2014 14:18:01 +0000
